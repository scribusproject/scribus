INCLUDE(FindPkgConfig)
IF (HAVE_REVENGE)
	pkg_check_modules(LIBFREEHAND libfreehand-0.1)
	IF (LIBFREEHAND_FOUND)
		MESSAGE("Building Freehand Importer with librevenge")
		INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR} ${CMAKE_SOURCE_DIR}/scribus ${LIBREVENGE_INCLUDE_DIRS} ${LIBREVENGE_GENERATORS_INCLUDE_DIRS} ${LIBREVENGE_STREAM_INCLUDE_DIRS} ${LIBFREEHAND_INCLUDE_DIRS})
		SET(IMPORTFH_PLUGIN_MOC_CLASSES importfh.h importfhplugin.h)
		SET(IMPORTFH_PLUGIN_SOURCES ../revenge/rawpainter.cpp importfh.cpp importfhplugin.cpp)
		SET(SCRIBUS_IMPORTFH_PLUGIN "importfh")
		QT5_WRAP_CPP(IMPORTFH_PLUGIN_MOC_SOURCES ${IMPORTFH_PLUGIN_MOC_CLASSES})
		ADD_LIBRARY(${SCRIBUS_IMPORTFH_PLUGIN} MODULE ${IMPORTFH_PLUGIN_SOURCES} ${IMPORTFH_PLUGIN_MOC_SOURCES})
		TARGET_LINK_LIBRARIES(${SCRIBUS_IMPORTFH_PLUGIN} ${PLUGIN_LIBRARIES} ${LIBREVENGE_LDFLAGS} ${LIBREVENGE_GENERATORS_LDFLAGS} ${LIBREVENGE_STREAM_LDFLAGS} ${LIBFREEHAND_LDFLAGS})
		INSTALL(TARGETS ${SCRIBUS_IMPORTFH_PLUGIN} LIBRARY DESTINATION ${PLUGINDIR} PERMISSIONS ${PLUGIN_PERMISSIONS})
		ADD_DEPENDENCIES(${SCRIBUS_IMPORTFH_PLUGIN} ${EXE_NAME})
	ENDIF (LIBFREEHAND_FOUND)
ENDIF (HAVE_REVENGE)
